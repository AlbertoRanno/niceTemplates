<script>
    document.addEventListener('DOMContentLoaded', function () {
        const IDsDivs = ['infoApi', 'infoApi1', 'infoApi2'];

        IDsDivs.forEach(IdDiv => {
            const divARecibirInfo = document.getElementById(IdDiv);
            if (divARecibirInfo) {
                let apiUrl;
                switch (IdDiv) {
                    case 'infoApi':
                        apiUrl = 'https://jsonplaceholder.typicode.com/todos';
                        break;
                    case 'infoApi1':
                        apiUrl = 'https://jsonplaceholder.typicode.com/todos/1';
                        break;
                    case 'infoApi2':
                        apiUrl = 'https://jsonplaceholder.typicode.com/todos/2';
                        break;
                    default:
                        console.warn(`ID de div desconocido: ${IdDiv}`);
                        apiUrl = '';
                }
                fetch(apiUrl)
                    .then(response => {
                        if (response.ok) {
                            return response.json();
                        }
                        throw new Error('No se pudo traer la info desde la API');
                    })
                    .then(data => {
                        if (Array.isArray(data)) {
                            data.forEach(objeto => {
                                const pContenedor = document.createElement('p');
                                pContenedor.textContent =
                                    `Tarea: ${objeto.title}, Completada: ${objeto.completed ? 'Sí' : 'No'}`;
                                divARecibirInfo.appendChild(pContenedor);
                            });
                        } else {
                            const pContenedor = document.createElement('p');
                            pContenedor.textContent =
                                `Tarea: ${data.title}, Completada: ${data.completed ? 'Sí' : 'No'}`;
                            divARecibirInfo.appendChild(pContenedor);
                        }
                    })
                    .catch(error => {
                        console.error(`Hubo un problema con fetch para el div con ID ${IdDiv}:`,
                            error);
                    });
            } else {
                //console.warn(`Div con ID ${IdDiv} no encontrado`);
            }
        });
    });
</script>
<!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start': new Date().getTime(),
            event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-P9XLPPW2');
</script>
<!-- End Google Tag Manager -->
<script src="https://unpkg.com/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.min.js"></script>
<script>
    //****************************Particularidades****************************

    let ultimoBotonClickeado = null;
    let ultimoBotonExternoClickeado = null;

    function alternarCollapse(id) {
        const elemento = document.getElementById(id);
        if (elemento) {
            const subregiones = elemento.parentElement.querySelectorAll('.collapse');
            subregiones.forEach((subregion) => {
                if (subregion !== elemento) {
                    subregion.classList.remove('active');
                }
            });
            elemento.classList.toggle('active');

            const boton = obtenerBotonPorId(id);
            resaltarBoton(boton);

            const botonExterno = obtenerBotonExternoPorId(id);
            resaltarBotonExterno(botonExterno);
        }
    }

    function resaltarBoton(boton) {
        if (boton && !boton.classList.contains('filialActiva')) {
            if (ultimoBotonClickeado) {
                ultimoBotonClickeado.classList.remove('filialActiva');
            }
            boton.classList.add('filialActiva');
            ultimoBotonClickeado = boton;
        }
    }

    function obtenerBotonPorId(id) {
        const botones = document.querySelectorAll('.contenidosRegiones button');
        for (const boton of botones) {
            if (boton.getAttribute('onclick') === `alternarCollapse('${id}')`) {
                return boton;
            }
        }
        return null;
    }

    function resaltarBotonExterno(botonExterno) {
        if (botonExterno) {
            if (ultimoBotonExternoClickeado && ultimoBotonExternoClickeado !== botonExterno) {
                ultimoBotonExternoClickeado.classList.remove('regionActiva');
            }
            botonExterno.classList.add('regionActiva');
            ultimoBotonExternoClickeado = botonExterno;
        }
    }

    function obtenerBotonExternoPorId(id) {
        const botonesExternos = document.querySelectorAll('.navBarLateral button');
        for (const botonExterno of botonesExternos) {
            if (botonExterno.getAttribute('onclick') === `alternarCollapse('${id}')`) {
                return botonExterno;
            }
        }
        return null;
    }

    //****************************Colapsables****************************

    function toggleAccordion(collapseId) {
        var accordionBody = document.getElementById(collapseId);
        accordionBody.classList.toggle('show');
        var accordionHeader = accordionBody.previousElementSibling
        accordionHeader.classList.toggle('show');
    }

    $(function () {
        $('.EXPAND_COLLAPSE').find('dt').addClass('expanded');
        $('.EXPAND_COLLAPSE').find('dt').on('click', function () {
            $(this).next().toggle('350');
            $(this).toggleClass('expanded');
        });
    });

    document.addEventListener('DOMContentLoaded', function () {

        //********************* Foco automático en vista mobile de Particularidades *********************
        if (window.innerWidth < 650) {
            document.querySelectorAll('.navBarLateral button').forEach(function (button) {
                button.addEventListener('click', function () {
                    var contentId = this.getAttribute('onclick').match(/'(.*?)'/)[1];
                    var filiales = document.getElementById(contentId);
                    if (filiales) {
                        var filialesPosition = filiales.getBoundingClientRect().top;
                        var headerHeight = document.querySelector('.navbar-menu-osde')
                            .getBoundingClientRect().height;

                        window.scrollTo({
                            top: window.scrollY + filialesPosition - headerHeight - 210,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        //**************** Ocultar el "Dejar comentario" para calificaciones positivas ****************
        if (document.querySelector('.mt-rating-button-yes')) {
            const yesButton = document.querySelector('.mt-rating-button-yes');
            const noButton = document.querySelector('.mt-rating-button-no');
            const feedbackForm = document.querySelector('.mt-feedback-form');

            yesButton.addEventListener('click', () => {
                feedbackForm.style.display = 'none';
            });

            noButton.addEventListener('click', () => {
                feedbackForm.style.display = 'block';
            });
        }

        //*********************Cambiar Nombre en solapa Featured Articles*********************
        function cambiarNombreEnSolapa() {
            var featuredHighestRated = document.querySelector('.noindex .mt-featured-highest-rated');
            if (featuredHighestRated) {
                var h5Element = featuredHighestRated.querySelector('h5');
                if (h5Element) {
                    h5Element.textContent = 'M\u00E1s calificados';
                }
                var spanElement = featuredHighestRated.querySelector('.mt-note');
                if (spanElement) {
                    spanElement.textContent = '(likes)';
                }
            }
        }
        //El MutationObserver es para observar cambios en el DOM
        var observer = new MutationObserver(function (mutationsList, observer) {
            for (var mutation of mutationsList) {
                if (mutation.type === 'childList') {
                    // Verifica si se añade un nuevo elemento con la clase .mt-featured-highest-rated
                    var featuredHighestRated = document.querySelector(
                        '.noindex .mt-featured-highest-rated');
                    if (featuredHighestRated) {
                        // Si se detecta el elemento, cambia el nombre en la solapa
                        cambiarNombreEnSolapa();
                        // Desconecta el observer después de realizar el cambio
                        observer.disconnect();
                        break;
                    }
                }
            }
        });

        // Observa cambios en el DOM
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });

        //****************************Ajuste para tablero****************************

        if (window.location.href.startsWith("https://osde-prod2.mindtouch.us/Special:Dashboard")) {
            var headerLogoContainer = document.querySelector('div.elm-header-logo-container');
            if (headerLogoContainer) {
                headerLogoContainer.style.height = '36px';
            }
        }

        //iconosCategoriasYGuias();

        //****************************Menu perfil usuario****************************

        var linkUsuario = document.querySelector('.mt-user-menu-user a');
        if (linkUsuario) {
            let contenedorFlechaUsuario = document.createElement('div');
            contenedorFlechaUsuario.classList.add('contenedorFlecha');
            let imgFlechaUsuario = document.createElement('img');
            imgFlechaUsuario.classList.add('imgFlecha');
            imgFlechaUsuario.src = '/@api/deki/files/26/downArrowWhite.png';
            imgFlechaUsuario.alt = 'flecha';
            contenedorFlechaUsuario.appendChild(imgFlechaUsuario);
            linkUsuario.innerHTML = '';
            linkUsuario.appendChild(contenedorFlechaUsuario);

            function cambiarFlecha() {
                if (imgFlechaUsuario.src.includes('downArrowWhite')) {
                    imgFlechaUsuario.src = '/@api/deki/files/21/upArrowWhite.png';
                } else {
                    imgFlechaUsuario.src = '/@api/deki/files/26/downArrowWhite.png';
                }
            }
            linkUsuario.addEventListener('click', cambiarFlecha);
        }

        //****************************Tooltips con imagenes****************************

        setTimeout(function () {
            let liConTooltips = document.querySelectorAll('.tool-tip-link');
            liConTooltips.forEach(function (elemento) {
                let link = elemento.querySelector('a');
                let texto = link.textContent.trim();
                // Reemplaza los caracteres especiales con un span
                texto = texto.replace(/([&~@*-]+)/g,
                    '<span class="caracteresOcultos">$1</span>');
                link.innerHTML = texto;
            });
        }, 1000);

        const contenedoresPath = document.querySelectorAll('.mt-lp-progress-container');

        contenedoresPath.forEach(contenedor => {
            const enlacesPath = contenedor.querySelectorAll('a');

            enlacesPath.forEach(enlace => {
                const nombreDelArticulo = enlace.textContent.trim();
                const contadorAsterisco = (nombreDelArticulo.match(/\*/g) || []).length;
                const contadorGuion = (nombreDelArticulo.match(/-/g) || []).length;
                const contadorArroba = (nombreDelArticulo.match(/@/g) || []).length;
                const contadorVirgulilla = (nombreDelArticulo.match(/~/g) || []).length;
                const contadorAspersand = (nombreDelArticulo.match(/&/g) || []).length;

                let nombreClaseTooltips = '';
                //Juntos
                if (nombreDelArticulo.endsWith('*')) {
                    switch (contadorAsterisco) {
                        case 1:
                            nombreClaseTooltips = 'todos';
                            break;
                        case 2:
                            nombreClaseTooltips = 'todosCoordi';
                            break;
                        case 3:
                            nombreClaseTooltips = 'todosAsesores';
                            break;
                    } //Coordinadores                    
                } else if (nombreDelArticulo.endsWith('-')) {
                    switch (contadorGuion) {
                        case 1:
                            nombreClaseTooltips = 'coordiCGD';
                            break;
                        case 2:
                            nombreClaseTooltips = 'coordiCAP';
                            break;
                        case 3:
                            nombreClaseTooltips = 'coordiCAT';
                            break;
                    } //Coordinadores Combinaciones
                } else if (nombreDelArticulo.endsWith('&')) {
                    switch (contadorAspersand) {
                        case 1:
                            nombreClaseTooltips = 'coordiCAT-CGD';
                            break;
                        case 2:
                            nombreClaseTooltips = 'coordiCGD-CAP';
                            break;
                        case 3:
                            nombreClaseTooltips = 'coordiCAT-CAP';
                            break;
                    } //Asesores
                } else if (nombreDelArticulo.endsWith('~')) {
                    switch (contadorVirgulilla) {
                        case 1:
                            nombreClaseTooltips = 'asesorCGD';
                            break;
                        case 2:
                            nombreClaseTooltips = 'asesorCAP';
                            break;
                        case 3:
                            nombreClaseTooltips = 'asesorCAT';
                            break;
                    } //Asesores Combinaciones
                } else if (nombreDelArticulo.endsWith('@')) {
                    switch (contadorArroba) {
                        case 1:
                            nombreClaseTooltips = 'asesoresCAT_CGD';
                            break;
                        case 2:
                            nombreClaseTooltips = 'asesoresCGD_CAP';
                            break;
                        case 3:
                            nombreClaseTooltips = 'asesoresCAT_CAP';
                            break;
                    }
                } else {
                    nombreClaseTooltips = '';
                }

                const tooltipSpan = document.createElement('span');

                if (nombreClaseTooltips) {
                    tooltipSpan.classList.add('tool-tip-link');
                    tooltipSpan.classList.add(nombreClaseTooltips);
                }

                enlace.parentNode.insertBefore(tooltipSpan, enlace);
                tooltipSpan.appendChild(enlace);
                enlace.removeAttribute('title');
            });
        });

        $(function () {
            $('.tool-tip-link').each(function () {
                if ($(this).attr('class').split(' ').length > 1) {
                    var nombreClaseTooltips = $(this).attr('class').split(' ')[1];
                    var rutaImagen = obtenerRutaImagen(nombreClaseTooltips);

                    tippy(this, {
                        content: `<img src="${rutaImagen}" alt="Icono" />`,
                        allowHTML: true,
                        theme: 'tooltip-custom',
                        onShow(instance) {
                            console.log(instance.popper);
                        },
                    });
                }
            });

            function obtenerRutaImagen(nombreClaseTooltips) {
                var imagenesPuestosTooltips = {
                    //Sueltos
                    'coordiCAT': '/@api/deki/files/33/Coordi_CAT-CAD.png',
                    'coordiCGD': '/@api/deki/files/32/Coordi_CGD.png',
                    'coordiCAP': '/@api/deki/files/30/Sub_y_encargado_CAP.png',
                    'coordiOtros': '/@api/deki/files/689/Otras_areas_-_coordinacion.png',
                    'asesorCAT': '/@api/deki/files/31/Asesor_CAT-CAD.png',
                    'asesorCGD': '/@api/deki/files/34/Asesor_CGD.png',
                    'asesorCAP': '/@api/deki/files/29/Asistente_CAP.png',
                    'asesorOtros': '/@api/deki/files/688/Otras_areas_-_asistentes.png',
                    //Grupos
                    'todos': '/@api/deki/files/608/Todos.png',
                    'todosCoordi': '/@api/deki/files/584/todosLosPuestos.png',
                    'todosAsesores': '/@api/deki/files/588/todosAsesores.png',
                    //Combinaciones de Coordinadores                
                    'coordiCAT-CGD': '/@api/deki/files/606/CAT-CGD.png',
                    'coordiCGD-CAP': '/@api/deki/files/594/CGD-CAP.png',
                    'coordiCAT-CAP': '/@api/deki/files/607/CAT-CAP.png',
                    //Combinaciones de Asesores
                    'asesoresCAT_CGD': '/@api/deki/files/605/asesoresCAT_CGD.png',
                    'asesoresCGD_CAP': '/@api/deki/files/587/asesoresCGD_CAP.png',
                    'asesoresCAT_CAP': '/@api/deki/files/604/asesoresCAT_CAP.png',
                    //A medida
                    'todosAsesoresCGD-CAP': '/@api/deki/files/593/todosAsesoresCGD-CAP.png',
                };

                return imagenesPuestosTooltips[nombreClaseTooltips] || '';
            }
        });

        //****************************Reversiones para Particularidades****************************

        function revertirEmptyRegions() {
            var spansNonEmptyRegion = document.querySelectorAll('.emptyRegions .nonEmptyRegion');
            spansNonEmptyRegion.forEach(function (spanNonEmptyRegion) {
                var spanEmptyRegions = spanNonEmptyRegion.parentNode;
                spanEmptyRegions.parentNode.replaceChild(spanNonEmptyRegion, spanEmptyRegions);
            });
        }

        revertirEmptyRegions();

        function revertirHasContent() {
            var botonesConHasContent = document.querySelectorAll('button .hasNotContent .hasContent');
            botonesConHasContent.forEach(function (spanHasContent) {
                var nombreFilial = spanHasContent.textContent;
                var nuevoNodoTexto = document.createTextNode(nombreFilial);
                spanHasContent.parentNode.replaceChild(nuevoNodoTexto, spanHasContent.parentNode
                    .firstChild);
            });
        }
        revertirHasContent();

        //****************************METRICAS DE NIVEL DE PAGINA****************************
        window.addEventListener('load', function () {
            const urlActual = window.location.href;
            if (urlActual.startsWith('https://osde-prod2.mindtouch.us/Special:PageRestrictions?id=')) {
                setTimeout(function () {

                    var urlPageLevel = document.querySelector('.or a');
                    var url = urlPageLevel.getAttribute('href');
                    var pageName = urlPageLevel.textContent.replace('Volver a ', '');

                    var listadoDeRestricciones = document.getElementById(
                        "page-restrictions-grant-list");
                    if (listadoDeRestricciones) {
                        var listadoDeRestriccionesChildren = listadoDeRestricciones.children;
                        var lista_grupos_permitidos = [];
                        if (listadoDeRestriccionesChildren) {
                            for (var i = 0; i < listadoDeRestriccionesChildren.length; i++) {
                                var li = listadoDeRestriccionesChildren[i];
                                if (li.classList.contains('group')) {
                                    var grupoPermitidoSpan = li.querySelector("span.name");
                                    if (grupoPermitidoSpan) {
                                        var nombreGrupoPermitido = grupoPermitidoSpan
                                            .textContent.trim();
                                        lista_grupos_permitidos.push(nombreGrupoPermitido);
                                    }
                                }
                            }
                            dataLayer.push({
                                'titulo_nivel_de_pagina': pageName,
                                'url_nivel_de_pagina': url,
                                'lista_grupos_permitidos': lista_grupos_permitidos
                            });
                            console.log('Grupos permitidos: ', lista_grupos_permitidos,
                                ' \nPagina: ', pageName, ' \nUrl: ', url);
                        } else {
                            //console.log('listadoDeRestricciones no tiene hijos');
                        }
                    } else {
                        //console.log('No encontro el id "page-restrictions-grant-list"');
                    }
                }, 500);
            } else {
                //console.log('No es una pagina de restriccion');
            }
        });

        //****************************METRICAS POR AGRUPADOR****************************
        var selectElement, selectedValue, selectElementOwner, selectElementType, propietario, catalogo, formato,
            articleURL, nombreIndice;

        //Controlo que el codigo se ejecute solo si la pagina contiene la seccion de configuracion de pagina
        if (document.getElementById("live-tag-article-select")) {
            selectElement = document.getElementById("live-tag-article-select");
            selectedValue = selectElement.options[selectElement.selectedIndex].value;

            //Controlo que obtenga los datos solo si esta a nivel documento/articulo
            if (selectedValue !== "article:topic-category" && selectedValue !== "article:topic-guide") {
                selectElementOwner = document.getElementById("live-tag-propietario-select");
                selectElementType = document.getElementById("live-tag-tipo-select");
                selectElementTypeArticle = document.getElementById("live-tag-article-select");

                propietario = selectElementOwner.options[selectElementOwner.selectedIndex].textContent;
                catalogo = selectElementType.options[selectElementType.selectedIndex].textContent;
                formato = selectElementTypeArticle.options[selectElementTypeArticle.selectedIndex].textContent;
                articleURL = window.location.href;
                dataLayer.push({
                    'catalogo': catalogo,
                    'formato': formato,
                    'propietario': propietario
                });

                console.log("URL: " + articleURL + " \nPropietario: " + propietario + " \nCatalogo: " +
                    catalogo + "\nFormato: " + formato);

                /* if (formato == "Procedimientos") {
                     document.getElementById('mt-toc-container').style.display = 'none';
                 } */
            }
        }
        // ************************************* Colapsar subniveles índice *************************************
        let liPrincipalesConOlInternos = document.querySelectorAll(
            '#mt-toc-container > nav > ol > li:has(> ol)');
        liPrincipalesConOlInternos.forEach(function (li) {
            let contenedorTitulo = document.createElement('div');
            contenedorTitulo.classList.add('titulo-collapsible-section');
            let olSiguienteAlLiActual = li.querySelector('ol');
            li.insertBefore(contenedorTitulo, olSiguienteAlLiActual)
            let enlace = li.querySelector('a');
            contenedorTitulo.appendChild(enlace)
            let contenedorFlechaIndice = document.createElement('span');
            contenedorFlechaIndice.classList.add('contenedorFlechaIndice');
            let imgFlechaIndice = document.createElement('img');
            imgFlechaIndice.classList.add('imgFlechaIndice');
            imgFlechaIndice.src = '/@api/deki/files/22/downArrowBlue.png.png';
            imgFlechaIndice.alt = 'flecha';
            contenedorTitulo.appendChild(contenedorFlechaIndice);
            contenedorFlechaIndice.appendChild(imgFlechaIndice);
            contenedorFlechaIndice.addEventListener('click', function () {
                let isActive = olSiguienteAlLiActual.classList.toggle('secondary-ol');
                imgFlechaIndice.src = isActive ? '/@api/deki/files/101/upArrowBlue.png' :
                    '/@api/deki/files/22/downArrowBlue.png.png';
                olSiguienteAlLiActual.style.display = isActive ? 'block' : 'none';
            });
        });

        //**************************** Dejar comentario *************************************
        var texto1DejarComentario = document.querySelector('.mt-feedback-rating-message');
        if (texto1DejarComentario) {
            texto1DejarComentario.textContent =
                '\u00BFEncontraste la informaci\u00F3n que buscabas en este art\u00EDculo?';
        }
        var texto2DejarComentario = document.querySelector('.mt-feedback-improve-label');
        if (texto2DejarComentario) {
            texto2DejarComentario.textContent = 'Contanos c\u00F3mo podemos mejorarlo.';
        }
        var consentimientoCheckbox = document.querySelector('.mt-feedback-consent-checkbox');
        var consentimientoLabel = document.querySelector('.mt-feedback-consent-label');
        if (consentimientoCheckbox && consentimientoLabel) {
            consentimientoCheckbox.style.display = 'none';
            consentimientoLabel.style.display = 'none';
        }

        //******************Evitar doble buscador home************************
        if (window.location.href === 'https://osde-prod2.mindtouch.us/') {
            obtenerDatosDeUsuario();

            var searchElement = document.querySelector('li.elm-global-search');
            if (searchElement) {
                var searchContent = searchElement.querySelector('.mt-quick-search-container');
                if (searchContent) {
                    searchContent.style.display = 'none';
                }
            }

            //iconosCategoriasYGuias();

            // }

            // function iconosCategoriasYGuias() {

            var imgHome = document.querySelectorAll('img.internal');
            imgHome.forEach(function (imagen, index) {

                var imgHomeSucesivas = 'imgHome' + (index + 1);
                imagen.classList.add(imgHomeSucesivas);
            });
        }

        //******************Esconder placeholders defaults**********************    
        var searchField = document.getElementById('mt-site-search-input');
        if (searchField) {
            searchField.placeholder = '\u00BFQu\u00E9 est\u00E1s buscando?';
            searchField.setAttribute('title', 'Campo de b\u00FAsqueda del sitio');
        }

        //******************METRICAS TABLA DE CONTENIDO******************************** 
        var elementNav = document.querySelector(".mt-toc-content");
        var contenido, urlDelSitio;

        elementNav.addEventListener("click", function (e) {

            contenido = e.target.textContent;
            urlDelSitio = window.location.href;
            obtenerDatosDeUsuario();

            console.log("Click en: " + contenido + " \nUrl: " + urlDelSitio);
        });

        function obtenerDatosDeUsuario() {
            var usuarioActivo, usuarioActivoID, usuarioActivoGrupo;

            usuarioActivo = document.getElementById("usuarioActivoID");
            usuarioActivoID = usuarioActivo.textContent;
            usuarioActivoGrupo = obtenerNombreDeGrupo();

            console.log("ID de usuario: ", usuarioActivoID + " \n Grupo al que pertenece: " +
                usuarioActivoGrupo);
        }

        function obtenerNombreDeGrupo() {

            var divContent = document.getElementById("usuarioActivoGrupo").textContent;
            var colonIndex = divContent.indexOf(':');

            if (colonIndex !== -1) {
                var jsonName = divContent.substring(1, colonIndex).trim();
                return jsonName;
            }
        }
        //****************************Lista de resultados************************************
        if (window.location.href.startsWith("https://osde-prod2.mindtouch.us/Special:Search")) {

            function ejecutarCorreccion2Llaves() {
                let resultadosLista = document.querySelectorAll('.mt-search-partial-content');
                resultadosLista.forEach(function (elemento) {
                    let textoSummary = elemento.textContent.trim();
                    textoSummary = textoSummary.replace(/\s*2\s*\{\s*\}\s*/g, '');
                    // Elimina el texto que coincide con el patron '2{}' con juego de espacios alrededor
                    elemento.textContent = textoSummary;
                });
            }
            setInterval(function () {
                ejecutarCorreccion2Llaves();
            }, 1000);

            document.addEventListener('click', function (event) {
                if (event.target.tagName === 'A') {
                    const url = event.target.href;
                    guardarURLenLocalStorage(url);
                }
            });
            document.addEventListener('contextmenu', function (event) {
                if (event.target.tagName === 'A') {
                    const url = event.target.href;
                    guardarURLenLocalStorage(url);
                }
            });
            //localStorage.clear();            
            function guardarURLenLocalStorage(url) {
                const urlsGuardadas = JSON.parse(localStorage.getItem('urlsGuardadas')) || [];

                if (!urlsGuardadas.includes(url)) {
                    urlsGuardadas.push(url);

                    localStorage.setItem('urlsGuardadas', JSON.stringify(urlsGuardadas));

                    console.log('Nueva URL guardada en el array:', url);
                    console.log('URLs Guardadas:', urlsGuardadas);
                } else {
                    console.log('La URL ya estaba en el array:', url);
                    console.log('URLs Guardadas:', urlsGuardadas);
                }
            }
            var interval = setInterval(function () {
                var targetNode = document.getElementById('search-results');
                if (targetNode) {
                    //  clearInterval(interval); // Detener la verificación periódica
                    aplicarCambioDeColor();
                }
            }, 1000);

            function aplicarCambioDeColor() {
                const urlsGuardadas = JSON.parse(localStorage.getItem('urlsGuardadas')) || [];
                document.querySelectorAll("#search-results li a").forEach(function (link) {
                    var linkUrl = link.getAttribute("href");
                    if (urlsGuardadas.includes(linkUrl)) {
                        link.style.color = "#800080";
                    }
                });
            }

            function handleClick(event) {
                if (event.target.tagName === 'A') {
                    const url = event.target.href;
                    const urlsGuardadas = JSON.parse(localStorage.getItem('urlsGuardadas')) || [];
                    if (!urlsGuardadas.includes(url)) {
                        urlsGuardadas.push(url);
                        localStorage.setItem('urlsGuardadas', JSON.stringify(urlsGuardadas));
                        console.log('Nueva URL guardada en el array:', url);
                        console.log('URLs Guardadas:', urlsGuardadas);
                        aplicarCambioDeColor();
                    } else {
                        console.log('La URL ya estaba en el array:', url);
                        console.log('URLs Guardadas:', urlsGuardadas);
                    }
                }
            }
            document.addEventListener('click', handleClick);
            var interval = setInterval(function () {
                var targetNode = document.getElementById('search-results');
                if (targetNode) {
                    clearInterval(interval);
                    aplicarCambioDeColor();
                }
            }, 1000);

            var botonBorrarLocalStorage = document.createElement("button");
            botonBorrarLocalStorage.innerHTML = "Borrar historial de links visitados";
            botonBorrarLocalStorage.classList.add("botonBorrarLocalStorage")
            botonBorrarLocalStorage.addEventListener("click", function () {
                localStorage.removeItem('urlsGuardadas');
                location.reload();
            });

            setTimeout(function () {

                var divBreadcrumbContainer = document.querySelector('div.mt-help-breadcrumb-container');
                if (divBreadcrumbContainer) {
                    divBreadcrumbContainer.appendChild(botonBorrarLocalStorage);
                }
                var buscador = document.querySelector('form.mt-search-form-seated');
                if (buscador) {
                    buscador.style.position = 'sticky';
                    buscador.style.top = '100px';
                }
                var filtros = document.querySelector('ul.mt-search-filters-options');
                if (filtros) {
                    filtros.style.position = 'sticky';
                    filtros.style.top = '100px';
                }

                let noResultadosH4 = document.querySelector('#search-results h4');
                let noResultadosP = document.querySelector('#search-results p');

                if (noResultadosH4 && noResultadosP) {
                    noResultadosH4.textContent = 'No se encontraron resultados';
                    noResultadosP.textContent =
                        'Intent\u00E1 modificando el criterio de b\u00FAsqueda o usando los filtros';
                }

                var results = document.querySelectorAll("li.result");
                results.forEach(function (result) {
                    var link = result.querySelector("a.go.result-spacer.mt-tracked-result");
                    var moreButton = result.querySelector("button.mt-help-more-content");
                    if (link) {
                        var originalUrl = link.getAttribute("href");
                        result.addEventListener("click", function (event) {
                            if (!moreButton || event.target !== moreButton) {
                                window.location.href = originalUrl;
                            }
                        });
                    }
                });

                let ubicacion = document.querySelector(".mt-search-filters-option-location");
                if (ubicacion) {
                    let textoEnNodo = ubicacion.childNodes[0];
                    textoEnNodo.nodeValue = "Categor\u00EDas";
                }
                let clasificacion = document.querySelector(".mt-search-filters-option-classifications");
                if (clasificacion) {
                    let textoEnNodo = clasificacion.childNodes[0];
                    textoEnNodo.nodeValue = "Caracter\u00EDsticas";
                }
                //******************METRICAS FILTROS DE BUSQUEDA******************************** 
                const tipoCheckboxes = document.querySelectorAll(
                    '.mt-search-filters-classification-tipo input[type="checkbox"]');

                for (let i = 0; i < tipoCheckboxes.length; i++) {
                    const checkbox = tipoCheckboxes[i];
                    checkbox.addEventListener('click', (event) => {
                        const tipoDeCatalogo = event.target.value.split(':');
                        console.log('El usuario hizo clic en el checkbox con valor:',
                            tipoDeCatalogo[1]);

                        dataLayer.push({
                            'event': 'filtro',
                            'filtro_categoria': 'Catalogo',
                            'filtro_nombre': tipoDeCatalogo[1],
                        });
                    });
                }

                let filtrosBuscador = document.getElementById('mt-search-spblls-filters');
                let colapsablesPrincipales = filtrosBuscador.querySelectorAll(
                    '.mt-search-filters-option');
                colapsablesPrincipales.forEach(colapsable => {
                    let botonToggle = colapsable.querySelector(
                        '.mt-search-filters-option-toggle');
                    let ulColapsablesInternos = colapsable.querySelector(
                        '.mt-search-filters-sub-options');

                    botonToggle.addEventListener('click', () => {
                        if (ulColapsablesInternos.style.display === 'none') {
                            ulColapsablesInternos.style.display = 'block';
                        } else {
                            ulColapsablesInternos.style.display = 'none';
                        }
                    });

                    botonToggle.classList.add('expanded');
                    botonToggle.setAttribute('aria-expanded', 'true');
                    ulColapsablesInternos.style.display = 'block';

                    let colapsablesInternos = ulColapsablesInternos.querySelectorAll(
                        '.mt-search-filters-classification-item');
                    colapsablesInternos.forEach(colapsablesInterno => {
                        let botonToggleInterno = colapsablesInterno.querySelector(
                            '.mt-search-filters-classification-toggle');
                        let subUlColapsablesInternos = colapsablesInterno.querySelector(
                            '.mt-search-filters-sub-options-classification');

                        botonToggleInterno.addEventListener('click', () => {
                            if (subUlColapsablesInternos.style.display ===
                                'none') {
                                subUlColapsablesInternos.style.display =
                                    'block';
                            } else {
                                subUlColapsablesInternos.style.display = 'none';
                            }
                        });

                        botonToggleInterno.classList.add('expanded');
                        botonToggleInterno.setAttribute('aria-expanded', 'true');
                        subUlColapsablesInternos.style.display = 'block';
                    });
                });
            }, 500);
        }


        //****************************Footer********************************
        var footerDefault = document.querySelector(".elm-footer");
        if (footerDefault) {

            function copiarAlPortapapeles(numero) {
                var elementoTemporal = document.createElement("textarea");
                elementoTemporal.value = numero;
                document.body.appendChild(elementoTemporal);
                elementoTemporal.select();
                document.execCommand("copy");
                document.body.removeChild(elementoTemporal);
                // alert("N\u00FAmero copiado al portapapeles: " + numero);

                var copiadoAlPortapapeles = document.createElement("div");
                copiadoAlPortapapeles.textContent = "Copiado al portapapeles: " + numero;
                copiadoAlPortapapeles.className = "copiadoAlPortapapeles";
                document.body.appendChild(copiadoAlPortapapeles);
                setTimeout(function () {
                    document.body.removeChild(copiadoAlPortapapeles);
                }, 3000);
            }

            var footerPropio = document.createElement("footer");
            footerPropio.className = "footer";
            var container = document.createElement("div");
            container.className = "container";
            var row = document.createElement("div");
            row.className = "row";
            var colLeft = document.createElement("div");
            colLeft.className = "colLeft";
            var logoLink = document.createElement("a");
            logoLink.href = "https://osde-prod2.mindtouch.us";
            logoLink.innerHTML = '<img src="/@api/deki/files/12/osdeWhite.png" alt="logoOSDE">';
            logoLink.className = "logoOSDE";
            logoLink.target = "_blank";
            logoLink.setAttribute('title', 'Enlace al Home');

            var ul = document.createElement("ul");
            ul.className = "footer-links";
            var link3 = document.createElement("li");
            link3.className = "linkMasBotonCopiarPortapapeles";
            var link3Anchor = document.createElement("a");
            link3Anchor.href = "https://www.osde.com.ar/index.html#!homepage.html";
            link3Anchor.textContent = "www.osde.com.ar";
            link3Anchor.target = "_blank";
            link3.setAttribute('title', 'Enlace a www.osde.com.ar');
            link3.appendChild(link3Anchor);
            var iconoCopiarlink3 = document.createElement("img");
            iconoCopiarlink3.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarlink3.className = "iconosCopiarNros";
            iconoCopiarlink3.alt = "Copiar al portapapeles";
            iconoCopiarlink3.addEventListener("click", function () {
                copiarAlPortapapeles("www.osde.com.ar");
            });
            link3.appendChild(iconoCopiarlink3);
            var link4 = document.createElement("li");
            link4.className = "linkMasBotonCopiarPortapapeles linkMasBotonCopiarPortapapelesLink4";
            var link4P = document.createElement("p");
            link4P.innerHTML =
                "Para sugerir un nuevo art\u00EDculo, escribinos, desde tu cuenta de email, a contenidos\u0040osde.com.ar";
            //link4.setAttribute('title', 'Sugerir un nuevo art\u00EDculo');
            link4.appendChild(link4P);
            var iconoCopiarlink4 = document.createElement("img");
            iconoCopiarlink4.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarlink4.className = "iconosCopiarNros";
            iconoCopiarlink4.alt = "Copiar al portapapeles";
            iconoCopiarlink4.addEventListener("click", function () {
                copiarAlPortapapeles("contenidos\u0040osde.com.ar");
            });
            link4.appendChild(iconoCopiarlink4);
            ul.appendChild(link3);
            ul.appendChild(link4);

            //Teléfonos
            var telefonos = document.createElement("div");
            telefonos.className = "cards_telefonos";

            //Asistencia médica
            var asistencia = document.createElement("div");
            asistencia.className = "telefonos_card asistencia_card";
            var asistenciaH5 = document.createElement("h5");
            asistenciaH5.textContent = "Asistencia m\u00E9dica";
            asistenciaH5.className = "titulos_columnas"
            var asistenciaContent = document.createElement("div");
            asistenciaContent.className = "telefonos_content";
            var asistencialink1Content = document.createElement("div");
            asistencialink1Content.className = "linkMasBotonCopiarPortapapeles"
            var asistencialink1 = document.createElement("a");
            asistencialink1.href = "https://wa.me/5491148729100";
            var img1 = document.createElement("img");
            img1.src = "/@api/deki/files/16/whatsapp.png";
            img1.className = "iconos_whatsapp";
            var textNode1 = document.createTextNode("11.4872.9100");
            asistencialink1.appendChild(img1);
            asistencialink1.appendChild(textNode1);
            asistencialink1Content.appendChild(asistencialink1);
            var iconoCopiarAsistencialink1 = document.createElement("img");
            iconoCopiarAsistencialink1.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAsistencialink1.className = "iconosCopiarNros";
            iconoCopiarAsistencialink1.alt = "Copiar al portapapeles";
            iconoCopiarAsistencialink1.addEventListener("click", function () {
                copiarAlPortapapeles("11-4872-9100");
            });
            asistencialink1Content.appendChild(iconoCopiarAsistencialink1);
            asistenciaContent.appendChild(asistencialink1Content);
            var asistencialink2Content = document.createElement("div");
            asistencialink2Content.className = "linkMasBotonCopiarPortapapeles";
            var asistencialink2 = document.createElement("a");
            asistencialink2.href = "tel:08108887788";
            var img2 = document.createElement("img");
            img2.src = "/@api/deki/files/17/telefono.png";
            var textNode2 = document.createTextNode("0810.888.7788");
            asistencialink2.appendChild(img2);
            asistencialink2.appendChild(textNode2);
            asistencialink2Content.appendChild(asistencialink2);
            var iconoCopiarAsistencialink2 = document.createElement("img");
            iconoCopiarAsistencialink2.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAsistencialink2.className = "iconosCopiarNros";
            iconoCopiarAsistencialink2.alt = "Copiar al portapapeles";
            iconoCopiarAsistencialink2.addEventListener("click", function () {
                copiarAlPortapapeles("0810-888-7788");
            });
            asistencialink2Content.appendChild(iconoCopiarAsistencialink2);
            asistenciaContent.appendChild(asistencialink2Content);
            var asistencialink3Content = document.createElement("div");
            asistencialink3Content.className = "linkMasBotonCopiarPortapapeles";
            var asistencialink3 = document.createElement("a");
            asistencialink3.href = "tel:08109996300";
            var img3 = document.createElement("img");
            img3.src = "/@api/deki/files/17/telefono.png";
            var textNode3 = document.createTextNode("0810.999.6300");
            asistencialink3.appendChild(img3);
            asistencialink3.appendChild(textNode3);
            asistencialink3Content.appendChild(asistencialink3);
            var iconoCopiarAsistencialink3 = document.createElement("img");
            iconoCopiarAsistencialink3.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAsistencialink3.className = "iconosCopiarNros";
            iconoCopiarAsistencialink3.alt = "Copiar al portapapeles";
            iconoCopiarAsistencialink3.addEventListener("click", function () {
                copiarAlPortapapeles("0810-999-6300");
            });
            asistencialink3Content.appendChild(iconoCopiarAsistencialink3);
            asistenciaContent.appendChild(asistencialink3Content);
            var asistencialink4 = document.createElement("a");
            asistencialink4.href = "https://asistenciamedica.osde.com.ar/tabs/inicio";
            asistencialink4.className = "solicitar_online";
            asistencialink4.textContent = "Solicitar asistencia online";
            asistenciaContent.appendChild(asistencialink4);
            asistencia.appendChild(asistenciaH5);
            asistencia.appendChild(asistenciaContent);

            //Riesgo de vida
            var riesgo = document.createElement("div");
            riesgo.className = "telefonos_card riesgo_card";
            var riesgoH5 = document.createElement("h5");
            riesgoH5.textContent = "Riesgo de vida";
            riesgoH5.className = "titulos_columnas"
            var riesgoContent = document.createElement("div");
            riesgoContent.className = "telefonos_content linkMasBotonCopiarPortapapeles";
            var riesgoLink = document.createElement("a");
            riesgoLink.href = "tel:08106661111";
            var riesgoImg = document.createElement("img");
            riesgoImg.src = "/@api/deki/files/17/telefono.png";
            var riesgoText = document.createTextNode("0810.666.1111");
            var iconoCopiarRiesgoLink = document.createElement("img");
            iconoCopiarRiesgoLink.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarRiesgoLink.className = "iconosCopiarNros";
            iconoCopiarRiesgoLink.alt = "Copiar al portapapeles";
            iconoCopiarRiesgoLink.addEventListener("click", function () {
                copiarAlPortapapeles("0810-666-1111");
            });
            riesgoLink.appendChild(riesgoImg);
            riesgoLink.appendChild(riesgoText);
            riesgoContent.appendChild(riesgoLink);
            riesgoContent.appendChild(iconoCopiarRiesgoLink);
            riesgo.appendChild(riesgoH5);
            riesgo.appendChild(riesgoContent);

            //Atención al socio        
            var atencion = document.createElement("div");
            atencion.className = "telefonos_card atencion_card";
            var atencionH5 = document.createElement("h5");
            atencionH5.textContent = "Atenci\u00F3n al socio";
            atencionH5.className = "titulos_columnas"
            var atencionContent = document.createElement("div");
            atencionContent.className = "telefonos_content";
            var atencionHorarios = document.createElement("p");
            atencionHorarios.textContent = "Lunes a viernes de 9 a 20 H.";
            var atencionLink1Content = document.createElement("div");
            atencionLink1Content.className = "linkMasBotonCopiarPortapapeles";
            var atencionLink1 = document.createElement("a");
            atencionLink1.href = "https://wa.me/5491148729000";
            var atencionImg1 = document.createElement("img");
            atencionImg1.src = "/@api/deki/files/16/whatsapp.png";
            atencionImg1.className = "iconos_whatsapp";
            var atencionText1 = document.createTextNode("11.4872.9000");
            atencionLink1.appendChild(atencionImg1);
            atencionLink1.appendChild(atencionText1);
            atencionLink1Content.appendChild(atencionLink1);
            var iconoCopiarAtencionLink1 = document.createElement("img");
            iconoCopiarAtencionLink1.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAtencionLink1.className = "iconosCopiarNros";
            iconoCopiarAtencionLink1.alt = "Copiar al portapapeles";
            iconoCopiarAtencionLink1.addEventListener("click", function () {
                copiarAlPortapapeles("11-4872-9000");
            });
            atencionLink1Content.appendChild(iconoCopiarAtencionLink1);
            var atencionLink2Content = document.createElement("div");
            atencionLink2Content.className = "linkMasBotonCopiarPortapapeles";
            var atencionLink2 = document.createElement("a");
            atencionLink2.href = "tel:08105556733";
            var atencionImg2 = document.createElement("img");
            atencionImg2.src = "/@api/deki/files/17/telefono.png";
            var atencionText2 = document.createTextNode("0810.555.6733");
            atencionLink2.appendChild(atencionImg2);
            atencionLink2.appendChild(atencionText2);
            atencionLink2Content.appendChild(atencionLink2);
            var iconoCopiarAtencionLink2 = document.createElement("img");
            iconoCopiarAtencionLink2.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAtencionLink2.className = "iconosCopiarNros";
            iconoCopiarAtencionLink2.alt = "Copiar al portapapeles";
            iconoCopiarAtencionLink2.addEventListener("click", function () {
                copiarAlPortapapeles("0810-555-6733");
            });
            atencionLink2Content.appendChild(iconoCopiarAtencionLink2);
            var atencionLink3Content = document.createElement("div");
            atencionLink3Content.className = "linkMasBotonCopiarPortapapeles";

            var atencionLink3 = document.createElement("a");
            atencionLink3.href = "tel:08005556733";
            var atencionImg3 = document.createElement("img");
            atencionImg3.src = "/@api/deki/files/17/telefono.png";
            var atencionText3 = document.createTextNode("0800.555.6733");
            atencionLink3.appendChild(atencionImg3);
            atencionLink3.appendChild(atencionText3);
            atencionLink3Content.appendChild(atencionLink3);
            var iconoCopiarAtencionLink3 = document.createElement("img");
            iconoCopiarAtencionLink3.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAtencionLink3.className = "iconosCopiarNros";
            iconoCopiarAtencionLink3.alt = "Copiar al portapapeles";
            iconoCopiarAtencionLink3.addEventListener("click", function () {
                copiarAlPortapapeles("0800.555.6733");
            });
            atencionLink3Content.appendChild(iconoCopiarAtencionLink3);

            var atencionLink4 = document.createElement("a");
            atencionLink4.href =
                "https://www.osde.com.ar/index.html#!osde-caps-centros-atencion-personalizada.html";
            var img4 = document.createElement("img");
            img4.src = "/@api/deki/files/15/calendario.png";
            var atencionText4 = document.createTextNode("Turnos en sucursal");
            atencionLink4.appendChild(img4);
            atencionLink4.appendChild(atencionText4);

            /* "Ya no se usa"...
            var atencionMailContent = document.createElement("div");
            atencionMailContent.className = "linkMasBotonCopiarPortapapeles";
            var atencionMail = document.createElement("p");
            atencionMail.className = "pFooter";
            atencionMail.textContent = "contacto@osde.com.ar";
            atencionMailContent.appendChild(atencionMail);
            var iconoCopiarAtencionMail = document.createElement("img");
            iconoCopiarAtencionMail.src = "/@api/deki/files/305/copiarAlPortapapeles.png";
            iconoCopiarAtencionMail.className = "iconosCopiarNros";
            iconoCopiarAtencionMail.alt = "Copiar al portapapeles";
            iconoCopiarAtencionMail.addEventListener("click", function () {
                copiarAlPortapapeles("contacto@osde.com.ar");
            });
            atencionMailContent.appendChild(iconoCopiarAtencionMail); */
            atencionContent.appendChild(atencionHorarios);
            atencionContent.appendChild(atencionLink1Content);
            atencionContent.appendChild(atencionLink2Content);
            atencionContent.appendChild(atencionLink3Content);
            atencionContent.appendChild(atencionLink4);
            //atencionContent.appendChild(atencionMailContent);
            atencion.appendChild(atencionH5);
            atencion.appendChild(atencionContent);

            telefonos.appendChild(asistencia);
            telefonos.appendChild(riesgo);
            telefonos.appendChild(atencion);

            colLeft.appendChild(logoLink);
            colLeft.appendChild(ul);
            colLeft.appendChild(telefonos);

            var colRight = document.createElement("div");
            colRight.className = "colRight";
            var copyright = document.createElement("p");
            copyright.innerHTML =
                '&copy;OSDE 2023 - Todos los derechos reservados. CUIT: 30-54674125-3 - Av. Leandro N. Alem 1067 - Piso 9 - C1001AAF - Buenos Aires. Superintendencia de Servicios de Salud - &Oacute;rgano de Control de Obras Sociales y Entidades de Medicina Prepaga - 0800-222-SALUD (72583) - www.sssalud.gob.ar - R.N.E.M.P. (Prov.) 1408 - R.N.O.S. 4-0080-0';
            colRight.appendChild(copyright);

            row.appendChild(colLeft);
            row.appendChild(colRight);
            container.appendChild(row);
            footerPropio.appendChild(container);
            footerDefault.parentNode.replaceChild(footerPropio, footerDefault);
        }

        //****************************Barra de navegación**********************************
        let topLevelNavigation = document.createElement('nav');
        topLevelNavigation.classList.add('navbar', 'navbar-menu-osde', 'elm-header-logo-menu');
        let divContenedor = document.createElement('div');
        divContenedor.classList.add('elm-header-nav-container', 'elm-nav-container');
        let ulPrincipal = document.createElement('ul');
        ulPrincipal.classList.add('navbar-header');

        let elementoLogo = document.createElement('li');
        elementoLogo.classList.add('navbar-header-logo');
        let linkLogo = document.createElement('a');
        linkLogo.href = "/";
        linkLogo.title = "Enlace al inicio";
        let logoImg = document.createElement('img');
        logoImg.alt = "Logo de la empresa";
        logoImg.src = "/@api/deki/files/1036/Biblos_3.0_azul.png";
        linkLogo.appendChild(logoImg);
        elementoLogo.appendChild(linkLogo);
        ulPrincipal.appendChild(elementoLogo);

        let elementoMenu = document.createElement('li');
        elementoMenu.classList.add('navbar-header-menu');
        let inputCheckbox = document.createElement('input');
        inputCheckbox.classList.add('nav-toggle');
        inputCheckbox.id = "nav-toggle";
        inputCheckbox.type = "checkbox";
        elementoMenu.appendChild(inputCheckbox);
        let ulSubList = document.createElement('ul');

        let labelResponsive = document.createElement('label');
        labelResponsive.setAttribute('for', 'nav-toggle');
        labelResponsive.classList.add('nav-toggle-label');
        let spanResponsive = document.createElement('span');
        labelResponsive.appendChild(spanResponsive);

        let divConsejos = document.createElement('div');
        divConsejos.classList.add('consejo-busqueda-area');
        let divInternoConsejos = document.createElement('div');
        divInternoConsejos.classList.add('elm-content-container');
        let ulConsejos = document.createElement('ul');
        ulConsejos.classList.add('navbar-header');
        let liConsejos = document.createElement('li');
        liConsejos.classList.add('has-submenu');
        let aConsejos = document.createElement('a');
        aConsejos.textContent = 'Tips de b\u00FAsqueda';
        let ulSubmenu = document.createElement('ul');
        ulSubmenu.classList.add('consejosDesplegables');
        let li1 = document.createElement('li');
        li1.textContent = 'En lugar de frases, us\u00E1 dos o m\u00E1s palabras clave.';
        let li3 = document.createElement('li');
        li3.textContent =
            'Us\u00E1 comillas para buscar frases o palabras exactas.';
        let li4 = document.createElement('li');
        li4.textContent =
            'Una vez que hayas realizado la b\u00FAsqueda, en el margen izquierdo vas a poder filtrar por categor\u00EDa o caracter\u00EDsticas del art\u00EDculo.';
        let li5 = document.createElement('li');
        li5.textContent =
            'Para buscar palabras estando dentro del art\u00EDculo o en la lista de resultados, pod\u00E9s usar CTRL+F.';
        let li6 = document.createElement('li');
        let li6Anchor = document.createElement("a");
        li6Anchor.classList.add('linkBusquedaAvanzada');
        li6Anchor.href =
            "https://osde-prod2.mindtouch.us/Base_de_conocimiento_interna/Tutoriales/Opciones_de_b%C3%BAsqueda_avanzada";
        li6Anchor.textContent = 'M\u00E1s tips de b\u00FAsqueda';
        li6.appendChild(li6Anchor);
        let contenedorFlecha = document.createElement('div');
        contenedorFlecha.classList.add('contenedorFlecha');
        let imgFlecha = document.createElement('img');
        imgFlecha.classList.add('imgFlecha');
        imgFlecha.src = '/@api/deki/files/26/downArrowWhite.png';
        imgFlecha.alt = 'flecha';
        contenedorFlecha.appendChild(imgFlecha)
        aConsejos.appendChild(contenedorFlecha);
        liConsejos.appendChild(aConsejos);
        ulSubmenu.appendChild(li1);
        ulSubmenu.appendChild(li3);
        ulSubmenu.appendChild(li4);
        ulSubmenu.appendChild(li5);
        ulSubmenu.appendChild(li6);
        liConsejos.appendChild(ulSubmenu);
        ulConsejos.appendChild(liConsejos);

        if (window.location.href.startsWith("https://osde-prod2.mindtouch.us/Special:Search")) {
            //Quisieron el boton de borrar, en el cuerpo de la pagina de resultados
        } else {
            let liBtnListaResultados = document.createElement('li');
            liBtnListaResultados.classList.add('navbar-header-menu');
            let botonIrAListaResultados = document.createElement("button");
            botonIrAListaResultados.innerHTML = "Lista de Resultados";
            botonIrAListaResultados.classList.add("botonIrAListaResultados");
            let linkIrAListaResultados = document.createElement('a');
            linkIrAListaResultados.href = "https://osde-prod2.mindtouch.us/Special:Search?type=wiki&query=";
            linkIrAListaResultados.title = "Lista de Resultados";
            botonIrAListaResultados.appendChild(linkIrAListaResultados);
            liBtnListaResultados.appendChild(botonIrAListaResultados);
            ulConsejos.appendChild(liBtnListaResultados);
            botonIrAListaResultados.addEventListener('click', function () {
                window.location.href =
                    "https://osde-prod2.mindtouch.us/Special:Search?type=wiki&query=";
            });
        }

        divInternoConsejos.appendChild(ulConsejos);
        divConsejos.appendChild(divInternoConsejos);
        setTimeout(function () {
            aConsejos.addEventListener('click', function () {
                ulSubmenu.classList.toggle('consejosDesplegables');
                // Cambio la URL de la flecha basado en si el menú está desplegado o no
                if (ulSubmenu.classList.contains('consejosDesplegables')) {
                    imgFlecha.src = '/@api/deki/files/26/downArrowWhite.png';
                } else {
                    imgFlecha.src = '/@api/deki/files/21/upArrowWhite.png';
                }
            });
        }, 1000);

        /*********************************** MODIFICAR BARRA DE NAVEGACION ***********************************/
        //SOLO AGREGAR LOS NOMBRES DE LAS CATEGORIAS Y SUS CORRESPONDIENTES GUIAS, TAL CUAL FUERON CREADAS EN SUS RUTAS

        /*Codigos UNICODE para los nombres con tildes:
        á - \u00E1
        é - \u00E9
        í - \u00ED
        ó - \u00F3
        ú - \u00FA
        
        Á - \u00C1
        É - \u00C9
        Í - \u00CD
        Ó - \u00D3
        Ú - \u00DA
        */

        //Agregar la nueva categoria al listado, en la ubicacion deseada, mantener el formato ("nombre",). La ultima va sin coma.
        let categorias = ["Socios y Empresas", "Prestadores"];

        /*Agregar las guias pertenecientes a la nueva Categoria, en la MISMA UBICACION QUE PUSIERON LA CATEGORIA (Si agregaron una
        Categoría luego de Afiliaciones, los corchetes con las guías para esta nueva categoría, irán después de los corchetes que 
        contienen las guías de Afiliaciones para mantener la concordancia). Mantener el formato (["guiaA1" , "guiaA2"] , ["guiaB1", "GuiaB2"],...).
        Luego del último grupo de guias, no va la coma.*/

        let guias = [
            // "Socios y Empresas"
            [
                "Alta de socio - Modificaci\u00F3n de grupo familiar",
                "Facturaci\u00F3n y Cobranzas a Socios",
                "Acceso al servicio",
                "Empadronamientos a coberturas especiales",
                "Solicitud de Autorizaciones",
                "Otorgamiento de Reintegro y Pago Directo",
                "Baja de socios"
            ],
            // Prestadores
            [
                "Aplicaciones",
                "Extranet",
                "Servicios",
                "Validaci\u00F3n de l\u00EDnea"
            ]
        ];

        function agregarCategoria(categoria, guias) {
            let listItem = document.createElement('li');
            listItem.classList.add('has-submenu', 'mt-style-conditional', 'style-wrap');
            let link = document.createElement('a');
            link.href = "/" + encodeURIComponent(categoria);
            link.textContent = categoria;

            // Agregar el icono a la izquierda de cada sección
            let icono;
            if (categoria === "Socios y Empresas") {
                icono = document.createElement('img');
                icono.classList.add('internal', 'imgHome1');
                icono.alt = "mindtouch.page#thumbnail";
                icono.loading = "lazy";
                icono.src =
                    "https://osde-prod2.mindtouch.us/@api/deki/files/516/mindtouch.page%2523thumbnail?revision=1";
            } else if (categoria === "Prestadores") {
                icono = document.createElement('img');
                icono.classList.add('internal', 'imgHome2');
                icono.alt = "mindtouch.page#thumbnail";
                icono.loading = "lazy";
                icono.src =
                    "https://osde-prod2.mindtouch.us/@api/deki/files/522/mindtouch.page%2523thumbnail?revision=4";
            }

            if (icono) {
                link.appendChild(icono);
            }

            link.title = categoria;
            listItem.appendChild(link);

            let listadoPorCategoria = document.createElement('ul');
            listadoPorCategoria.classList.add('submenu');

            guias.forEach(function (guia) {
                let subListItem = document.createElement('li');
                let subLink = document.createElement('a');
                subLink.href = "/" + encodeURIComponent(categoria) + "/" + encodeURIComponent(guia);
                subLink.textContent = guia;
                subLink.title = guia;
                subListItem.appendChild(subLink);
                listadoPorCategoria.appendChild(subListItem);
            });

            listItem.appendChild(listadoPorCategoria);
            ulSubList.appendChild(listItem);
        }

        for (let i = 0; i < categorias.length; i++) {
            agregarCategoria(categorias[i], guias[i]);
        }

        elementoMenu.appendChild(labelResponsive);
        elementoMenu.appendChild(ulSubList);
        ulPrincipal.appendChild(elementoMenu);
        divContenedor.appendChild(ulPrincipal);
        topLevelNavigation.appendChild(divContenedor);
        topLevelNavigation.appendChild(divConsejos);
        let logoContainer = document.querySelector('.elm-header-logo-container');
        if (logoContainer) {
            logoContainer.innerHTML = '';
            logoContainer.appendChild(topLevelNavigation);
        }

        //*******************************Login********************************
        if (window.location.href.startsWith("https://osde-prod2.mindtouch.us/Special:UserLogin")) {
            var botonesNavbarLogin = document.querySelector('li.navbar-header-menu');
            if (botonesNavbarLogin) {
                botonesNavbarLogin.style.display = 'none';
            }
            var areaConsejos = document.querySelector('div.consejo-busqueda-area');
            if (areaConsejos) {
                areaConsejos.style.display = 'none';
            }
            //Hasta encontrar el error de por que si se desloguea un No-Admin, no hay permisos sobre las imagenes:
            var hiddenImgs = document.querySelectorAll('img');
            hiddenImgs.forEach(function (img) {
                img.style.display = 'none';
            });
            var buscadorLogin = document.querySelector('.elm-global-search');
            if (buscadorLogin) {
                buscadorLogin.style.display = 'none';
            }
            var widgetPassword = document.getElementById('widget-password');
            if (widgetPassword) {
                widgetPassword.style.display = 'none';
            }
            var tituloLogin = document.querySelector('#title');
            if (tituloLogin) {
                var divBotonLogin = document.createElement('div');
                divBotonLogin.className = "btn-login-area";
                tituloLogin.innerHTML = 'Bienvenido a la base de conocimientos de OSDE. ';
                tituloLogin.className = 'tituloLogin';
                var LogoLoginTxt = document.createElement('h2');
                LogoLoginTxt.innerHTML = 'Biblos 3.0 - OSDE';
                LogoLoginTxt.className = 'logoLoginTxt';
                elementoLogo.appendChild(LogoLoginTxt);
                var linkLoginBiblos = document.createElement('a');
                linkLoginBiblos.innerHTML = 'Iniciar sesi&oacute;n en Biblos 3.0';
                linkLoginBiblos.href = 'https://osde-prod2.mindtouch.us/@app/auth/2/login';
                //linkLoginBiblos.target = '_blank';
                linkLoginBiblos.className = 'linkLoginBiblos';
                divBotonLogin.appendChild(linkLoginBiblos);
                tituloLogin.insertAdjacentElement('afterend', divBotonLogin);
            }
        }

    });
</script>