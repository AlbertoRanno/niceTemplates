<div id="mt-search-spblls-filters" class="mt-search-column-filters">
    <ul class="mt-search-filters-options" style="position: sticky; top: 100px;">
        <ul class="mt-search-filters-options">
            <li class="mt-search-filters-header"><span>Filtrar resultados</span><button
                    class="mt-search-filters-toggle-all" aria-label="¡Muéstrame Filtros"
                    data-toggle-label="Filtros"></button></li>
            <li class="mt-search-filters-option mt-search-filters-option-location mt-search-filters-toggle-all-hide">
                Ubicación<button class="mt-search-filters-option-toggle" aria-label="¡Muéstrame Ubicación"
                    data-toggle-label="Ubicación"></button>
                <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-locations">
                    <li class="mt-search-filters-location-item"><a class="mt-search-filters-location"
                            href="#">Prestaciones <span class="mt-search-filters-count">(12)</span></a></li>
                    <li class="mt-search-filters-location-item"><a class="mt-search-filters-location" href="#">Acceso a
                            la Cobertura <span class="mt-search-filters-count">(10)</span></a></li>
                    <li class="mt-search-filters-location-item"><a class="mt-search-filters-location"
                            href="#">PruebasVarias <span class="mt-search-filters-count">(5)</span></a></li>
                    <li class="mt-search-filters-location-item"><a class="mt-search-filters-location" href="#">Cobertura
                            <span class="mt-search-filters-count">(1)</span></a></li>
                    <li class="mt-search-filters-location-item"><a class="mt-search-filters-location"
                            href="#">Tutoriales <span class="mt-search-filters-count">(1)</span></a></li>
                </ul>
            </li>
            <li
                class="mt-search-filters-option mt-search-filters-option-classifications mt-search-filters-toggle-all-hide">
                Clasificación<button class="mt-search-filters-option-toggle" aria-label="¡Muéstrame Clasificación"
                    data-toggle-label="Clasificación"></button>
                <ul class="mt-search-filters-sub-options">
                    <li class="mt-search-filters-classification-item mt-search-filters-classification-article"><a
                            class="mt-search-filters-classification">Page type<button
                                class="mt-search-filters-classification-toggle" aria-label="¡Muéstrame Page type"
                                data-toggle-label="Page type"></button></a>
                        <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-classification">
                            <li class="mt-search-filters-classification-article-topic-category"><label
                                    class="mt-search-filters-classification-label"><input name="article" type="checkbox"
                                        value="article:topic-category">Category</label></li>
                            <li class="mt-search-filters-classification-article-topic-guide"><label
                                    class="mt-search-filters-classification-label"><input name="article" type="checkbox"
                                        value="article:topic-guide">Guide</label></li>
                            <li class="mt-search-filters-classification-article-topic"><label
                                    class="mt-search-filters-classification-label"><input name="article" type="checkbox"
                                        value="article:topic">Topic</label></li>
                            <li class="mt-search-filters-classification-article-howto"><label
                                    class="mt-search-filters-classification-label"><input name="article" type="checkbox"
                                        value="article:howto">How-to</label></li>
                            <li class="mt-search-filters-classification-article-reference"><label
                                    class="mt-search-filters-classification-label"><input name="article" type="checkbox"
                                        value="article:reference">Reference</label></li>
                        </ul>
                    </li>
                    <li class="mt-search-filters-classification-item mt-search-filters-classification-propietario"><a
                            class="mt-search-filters-classification">Propietario<button
                                class="mt-search-filters-classification-toggle" aria-label="¡Muéstrame Propietario"
                                data-toggle-label="Propietario"></button></a>
                        <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-classification">
                            <li class="mt-search-filters-classification-propietario-cobranzas"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:cobranzas">Cobranzas</label></li>
                            <li class="mt-search-filters-classification-propietario-gmg"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:gmg">Gmg</label></li>
                            <li class="mt-search-filters-classification-propietario-gmp"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:gmp">Gmp</label></li>
                            <li class="mt-search-filters-classification-propietario-suministros"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:suministros">Suministros</label></li>
                            <li class="mt-search-filters-classification-propietario-marketing"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:marketing">Marketing</label></li>
                            <li class="mt-search-filters-classification-propietario-comercial"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:comercial">Comercial</label></li>
                            <li class="mt-search-filters-classification-propietario-afiliaciones"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:afiliaciones">Afiliaciones</label></li>
                            <li class="mt-search-filters-classification-propietario-dh"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:dh">DH</label></li>
                            <li class="mt-search-filters-classification-propietario-soporte"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:soporte">Soporte</label></li>
                            <li class="mt-search-filters-classification-propietario-urgencias"><label
                                    class="mt-search-filters-classification-label"><input name="propietario"
                                        type="checkbox" value="propietario:urgencias">Urgencias</label></li>
                        </ul>
                    </li>
                    <li class="mt-search-filters-classification-item mt-search-filters-classification-tipo"><a
                            class="mt-search-filters-classification">Tipo<button
                                class="mt-search-filters-classification-toggle" aria-label="¡Muéstrame Tipo"
                                data-toggle-label="Tipo"></button></a>
                        <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-classification">
                            <li class="mt-search-filters-classification-tipo-prestaciones"><label
                                    class="mt-search-filters-classification-label"><input name="tipo" type="checkbox"
                                        value="tipo:prestaciones">Prestaciones</label></li>
                            <li class="mt-search-filters-classification-tipo-servicios"><label
                                    class="mt-search-filters-classification-label"><input name="tipo" type="checkbox"
                                        value="tipo:servicios">Servicios</label></li>
                            <li class="mt-search-filters-classification-tipo-tutoriales"><label
                                    class="mt-search-filters-classification-label"><input name="tipo" type="checkbox"
                                        value="tipo:tutoriales">Tutoriales</label></li>
                        </ul>
                    </li>
                    <li class="mt-search-filters-classification-item mt-search-filters-classification-estado"><a
                            class="mt-search-filters-classification">Estado de borradores<button
                                class="mt-search-filters-classification-toggle"
                                aria-label="¡Muéstrame Estado de borradores"
                                data-toggle-label="Estado de borradores"></button></a>
                        <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-classification">
                            <li class="mt-search-filters-classification-estado-en-progreso"><label
                                    class="mt-search-filters-classification-label"><input name="estado" type="checkbox"
                                        value="estado:en-progreso">En progreso</label></li>
                            <li class="mt-search-filters-classification-estado-revision-pendiente"><label
                                    class="mt-search-filters-classification-label"><input name="estado" type="checkbox"
                                        value="estado:revision-pendiente">Revisión pendiente</label></li>
                            <li class="mt-search-filters-classification-estado-revision"><label
                                    class="mt-search-filters-classification-label"><input name="estado" type="checkbox"
                                        value="estado:revision">En revisión</label></li>
                            <li class="mt-search-filters-classification-estado-aprobado"><label
                                    class="mt-search-filters-classification-label"><input name="estado" type="checkbox"
                                        value="estado:aprobado">Aprobado</label></li>
                            <li class="mt-search-filters-classification-estado-rechazado"><label
                                    class="mt-search-filters-classification-label"><input name="estado" type="checkbox"
                                        value="estado:rechazado">Rechazado</label></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="mt-search-filters-option mt-search-filters-option-attachments mt-search-filters-toggle-all-hide">
                Incluir datos adjuntos<label class="mt-toggle-switch mt-search-filters-toggle-switch"
                    aria-label="View Attachments Toggle"><input aria-label="¡Muéstrame Incluir datos adjuntos"
                        class="mt-search-filters-attachments-toggle" data-toggle-label="Incluir datos adjuntos"
                        type="checkbox"><span class="mt-toggle-switch-slider"></span></label>
                <ul class="mt-search-filters-sub-options">
                    <li><label class="mt-search-filters-sub-options-attachments-description">Tipo de contenido</label>
                        <ul class="mt-search-filters-sub-options mt-search-filters-sub-options-attachments">
                            <li><label class="mt-search-filters-classification-label"><input
                                        class="mt-search-filters-document-type" name="type" type="checkbox"
                                        value="document">Documento</label></li>
                            <li><label class="mt-search-filters-classification-label"><input
                                        class="mt-search-filters-document-type" name="type" type="checkbox"
                                        value="image">Imagen</label></li>
                            <li><label class="mt-search-filters-classification-label"><input
                                        class="mt-search-filters-document-type" name="type" type="checkbox"
                                        value="binary">Otro</label></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </ul>
</div>

<script>
    /*CAMBIO LOS NOMBRES MOSTRADOS: (OJO, SI BORRO FILTRO, VUELVE A NOMBRES ORIGINALES Y COLAPSADO. Esto se debe estimo, a que estoy poniendo el código,
    dentro del evento de carga de página, y no reinicia la página cuando borro los filtros. Habría que probar por fuera del evento, o recapturarlas )

    Si hacía lo de siempre: cambiaba el li actual que tiene un boton y un UL dentro, por un li que solo tenia la palabra, por eso lo siguiente no sirve:
    var filtroUbicacion = document.querySelector('.mt-search-filters-option-location');
    if (filtroUbicacion) {filtroUbicacion.textContent = 'Categor\u00EDas';}
    var filtroClasificacion = document.querySelector('.mt-search-filters-option-classifications');
    if (filtroClasificacion) {filtroClasificacion.textContent = 'textoADefinir';}
    */

    // Capturo el elemento que muestra la palabra "Ubicación"
    let ubicacion = document.querySelector(".mt-search-filters-option-location");
    if (ubicacion) {
        let textoEnNodo = ubicacion.childNodes[0];
        // busca su primer nodo hijo (child node), que generalmente es un nodo de texto.
        textoEnNodo.nodeValue = "Categor\u00EDas";
        // actualiza el valor del nodo de texto con el texto "Categorías"
        // El textoEnNodo.nodeValue es una propiedad que permite cambiar el contenido de texto del nodo sin afectar la estructura del elemento HTML en sí.
    }

    // IDEM para "Clasificación"
    let clasificacion = document.querySelector(".mt-search-filters-option-classifications");
    if (clasificacion) {
        let textoEnNodo = clasificacion.childNodes[0];
        textoEnNodo.nodeValue = "Caracter\u00EDsticas";
    }

    // Capturo elemento principal y sus colapsables
    let filtrosBuscador = document.getElementById('mt-search-spblls-filters');
    let colapsablesPrincipales = filtrosBuscador.querySelectorAll('.mt-search-filters-option');
    // Al capturar varios, los guarda, OJO, en una LISTA y No, en un Array... amplío al final (**).
    // A la lista puedo acceder desde los índices y usar ciclos.

    // Los recorro y expando
    colapsablesPrincipales.forEach(colapsable => {
        // Recorro la colección de elementos (LISTA), y en cada iteración realizo lo siguiente:
        let botonToggle = colapsable.querySelector('.mt-search-filters-option-toggle');
        // Busco y guardo cada botón de colapso
        let ulColapsablesInternos = colapsable.querySelector('.mt-search-filters-sub-options');
        // Busco y guardo cada elemento con la clase CSS "mt-search-filters-sub-options" que es el UL que contiene a los colapsables internos

        // Al no perder la funcionalidad default por mis cambios, agrego un evento de clic para controlar el colapso/expansión
        botonToggle.addEventListener('click', () => {
            if (ulColapsablesInternos.style.display === 'none') {
                ulColapsablesInternos.style.display = 'block';
            } else {
                ulColapsablesInternos.style.display = 'none';
            }
        });

        // Marco el botón como expandido y muestro las UL (Esto hace que venga expandido al cargar la página)
        botonToggle.classList.add('expanded');
        // Se agrega la clase "expanded" al elemento botonToggle. Esto indica que se está expandiendo el elemento.
        botonToggle.setAttribute('aria-expanded', 'true');
        // Se establece el atributo "aria-expanded" del elemento botonToggle en 'true'. Este atributo es comúnmente utilizado para proporcionar información
        // de accesibilidad sobre el estado de expansión o colapso del elemento. (Tendría que haber bastado, supongo, con cambiar esto, pero no funcionó... por eso todo este desarrollo)
        ulColapsablesInternos.style.display = 'block';
        // Hago que se muestre en la página

        // Como hay elementos, que a su vez son expandibles, dentro de "Clasificación", realizo un nuevo bucle para recorrerlos (lo mismo, a un nivel más de profundidad)
        let colapsablesInternos = ulColapsablesInternos.querySelectorAll(
            '.mt-search-filters-classification-item');

        colapsablesInternos.forEach(colapsablesInterno => {
            let botonToggleInterno = colapsablesInterno.querySelector(
                '.mt-search-filters-classification-toggle');
            // Busco y guardo cada botón de colapso (en este caso los "+")
            let subUlColapsablesInternos = colapsablesInterno.querySelector(
                '.mt-search-filters-sub-options-classification');
            // Busco y guardo cada UL interna con sus items

            // Lo mismo que antes, agrego un evento de clic para controlar el colapso/expansión 
            botonToggleInterno.addEventListener('click', () => {
                if (subUlColapsablesInternos.style.display === 'none') {
                    subUlColapsablesInternos.style.display = 'block';
                } else {
                    subUlColapsablesInternos.style.display = 'none';
                }
            });

            // Marco el botón como expandido y muestro las UL internas (Lo mismo que antes, esto hace que venga expandido al cargar la página)
            botonToggleInterno.classList.add('expanded');
            botonToggleInterno.setAttribute('aria-expanded', 'true');
            subUlColapsablesInternos.style.display = 'block';
        });
    });


    /* 
    (**)
     Una lista y un array son estructuras de datos que almacenan múltiples elementos, pero tienen algunas diferencias clave:

        Tipo de dato:

        Array: Es una estructura de datos homogénea, lo que significa que todos los elementos en un array deben ser del mismo tipo de datos. Por ejemplo, en un array de números, todos los elementos son números.
        Lista: Es una estructura de datos heterogénea, lo que significa que los elementos de una lista pueden ser de diferentes tipos de datos. Puedes tener números, cadenas, objetos, etc., en una misma lista.
        Tamaño dinámico:

        Array: En algunos lenguajes de programación, los arrays tienen un tamaño fijo que debe especificarse al crearlos. Cambiar el tamaño de un array generalmente requiere crear uno nuevo con el tamaño deseado y copiar los elementos del array original. En otros lenguajes, como JavaScript, los arrays son dinámicos y su tamaño puede cambiar automáticamente al agregar o quitar elementos.
        Lista: Por lo general, las listas tienen un tamaño dinámico y se pueden ajustar automáticamente según la cantidad de elementos que contengan. Esto hace que trabajar con listas sea más flexible en comparación con los arrays de tamaño fijo.
        Métodos y operaciones:

        Array: Los arrays suelen tener métodos y operaciones específicos, como push para agregar elementos al final, pop para eliminar el último elemento, y otros métodos que permiten realizar operaciones comunes en los elementos.
        Lista: Las listas pueden tener operaciones similares a las de los arrays, pero también pueden admitir una amplia variedad de métodos específicos según el lenguaje de programación. La disponibilidad de métodos y operaciones puede variar de un lenguaje a otro.
        Tipado:

        Array: En algunos lenguajes, los arrays tienen un tipo de datos fijo para todos sus elementos. Por ejemplo, en lenguajes como Java, se debe especificar el tipo de elementos que contendrá un array en el momento de su creación.
        Lista: Las listas suelen ser más flexibles en cuanto al tipo de elementos que pueden contener. Pueden contener elementos de diferentes tipos, lo que las hace más versátiles.
        En resumen, la principal diferencia radica en la flexibilidad en cuanto al tipo de datos y el tamaño dinámico. Los arrays tienden a ser más rígidos en cuanto al tipo de datos y pueden tener un tamaño fijo o dinámico, mientras que las listas son más flexibles en ambos aspectos. La elección entre una u otra depende de las necesidades específicas de tu programa y del lenguaje de programación que estés utilizando.
    */

    /* VERSIÓN RESUMIDA:
    
     let ubicacion = document.querySelector(".mt-search-filters-option-location");
     if (ubicacion) {
         let textoEnNodo = ubicacion.childNodes[0];
         textoEnNodo.nodeValue = "Categor\u00EDas";}
     let clasificacion = document.querySelector(".mt-search-filters-option-classifications");
     if (clasificacion) {
         let textoEnNodo = clasificacion.childNodes[0];
         textoEnNodo.nodeValue = "Caracter\u00EDsticas";}

     let filtrosBuscador = document.getElementById('mt-search-spblls-filters');
     let colapsablesPrincipales = filtrosBuscador.querySelectorAll('.mt-search-filters-option');
     colapsablesPrincipales.forEach(colapsable => {
         let botonToggle = colapsable.querySelector('.mt-search-filters-option-toggle');
         let ulColapsablesInternos = colapsable.querySelector('.mt-search-filters-sub-options');

        botonToggle.addEventListener('click', () => {
            if (ulColapsablesInternos.style.display === 'none') {
                ulColapsablesInternos.style.display = 'block';
            } else {
                ulColapsablesInternos.style.display = 'none';}});

         botonToggle.classList.add('expanded');
         botonToggle.setAttribute('aria-expanded', 'true');
         ulColapsablesInternos.style.display = 'block';

         let colapsablesInternos = ulColapsablesInternos.querySelectorAll('.mt-search-filters-classification-item');
         colapsablesInternos.forEach(colapsablesInterno => {
             let botonToggleInterno = colapsablesInterno.querySelector('.mt-search-filters-classification-toggle');
             let subUlColapsablesInternos = colapsablesInterno.querySelector('.mt-search-filters-sub-options-classification');

                botonToggleInterno.addEventListener('click', () => {
                if (subUlColapsablesInternos.style.display === 'none') {
                    subUlColapsablesInternos.style.display = 'block';
                } else {
                    subUlColapsablesInternos.style.display = 'none';}});

             botonToggleInterno.classList.add('expanded');
             botonToggleInterno.setAttribute('aria-expanded', 'true');
             subUlColapsablesInternos.style.display = 'block';
         });
     });

    */
</script>